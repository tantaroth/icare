<!DOCTYPE html>
<html ng-app="appIcare">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Title Test</title>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    </head>
    <body ng-controller="ctrlGenders">
        <form id="form" method="post" accept-charset="utf-8">
            <fieldset>
                <legend><span>GÃ©neros</span></legend>
                <div>
                    <label for="name">Nombre</label> <input type="text" name="name" id="name" ng-model="newGender.name" placeholder="Nombre.." />
                </div>
                <div ng-hide="edited">
                    <button id="save" ng-click="add()" type="submit">Guardar</button>
                </div>
                <div ng-show="edited">
                    <button id="save" ng-click="edit()" type="submit">Editar</button>
                </div>
            </fieldset>
        </form>
        <br>
        <p>
            <div>
                <table width="100%" border="1">
                    <tr>
                        <th>Nombre</th>
                        <th>Acciones</th>
                    </tr>
                    <tr ng-repeat="(i, gender) in genders">
                        <td>{{ gender.name }}</td>
                        <td>
                            <a href="#" ng-click="view(i);">Editar</a>
                            <a href="#" ng-click="remove(i);">Remover</a>
                        </td>
                    </tr>
                </table>
            </div>
        </p>
        <script>
        var genders;

        angular.module("appIcare", [])
            .controller("ctrlGenders", function($scope) {
                $scope.genders = [];
                $scope.newGender = {};
                $scope.edited = false;
                $scope.id = false;

                $scope.add = function() {
                    console.log('asdas');
                    $scope.newGender = {
                        name: $scope.newGender.name
                    };
                    $scope.genders.push($scope.newGender);
                    $scope.newGender = {};
                }

                $scope.view = function(i){
                    genders = $scope.genders[i];
                    $scope.newGender.name = genders.name;
                    $scope.id = i;
                    $scope.edited = true;
                }

                $scope.edit = function(i){
                    $scope.newGender = {
                        name: $scope.newGender.name
                    };
                    $scope.genders.splice($scope.id, 1, $scope.newGender);
                    $scope.newGender = {};
                    $scope.edited = false;
                    $scope.id = false;
                }

                $scope.remove = function(i) {
                    $scope.genders.splice(i, 1);
                }
            });
        </script>
    </body>
</html>